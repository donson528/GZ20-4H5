<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <input type="text" />
    <ul class="test"></ul>

    <!-- https://suggest.taobao.com/sug?code=utf-8&q=%E6%89%8B%E6%9C%BA%E5%A3%B3 -->
    <!-- <script>
      function xxx(params) {
        console.log(params);
        
      }
    </script> -->
    <!-- <script src="https://suggest.taobao.com/sug?code=utf-8&q=%E6%89%8B%E6%9C%BA%E5%A3%B3&callback=xxx"></script> -->

    <script>
      // var xxx
      function getJsonp(url, data, callback) {
        var funcName = "jsonp" + new Date().getTime();
        // xxx = callback;
        window[funcName] = callback;

        var node = document.createElement("script");
        node.src = url + "&callback=" + funcName;
        document.body.appendChild(node);
      }

      // getJsonp(
      //   "https://suggest.taobao.com/sug?code=utf-8&q=%E6%89%8B%E6%9C%BA%E5%A3%B3",
      //   {
      //     // code: "utf-8",
      //     // q: value,
      //   },
      //   function (data) {
      //     console.log("data", data.result);
      //   }
      // );

      // getJsonp(
      //   "https://suggest.taobao.com/sug?code=utf-8&q=口罩&callback=xxx",
      //   {
      //     // code: "utf-8",
      //     // q: value,
      //   },
      //   function (data) {
      //     console.log("data", data.result);
      //   }
      // );

      document.querySelector("input").oninput = function () {
        var value = this.value;

        getJsonp(
          "https://suggest.taobao.com/sug?code=utf-8&q=" + value,
          {},
          function (data) {
            // console.log("data", data.result);
            // document.createElement("li");
            var str = "";
            data.result.forEach(function (element) {
              str += "<li>" + element[0] + "</li>";
            });
            document.querySelector("ul.test").innerHTML = str;
          }
        );
      };
    </script>
  </body>
</html>
